Component({properties:{data:{type:Object,observer:function(e,o){if(!0===e.show){const o=(getApp().ghossModal||{}).config||{};e.theme||(e.theme=o.theme||"normal"),e.animation||(e.animation=o.animation||"none"),e.title||(e.title="标题"),e.content||(e.content=null),e.confirmText||(e.confirmText="确定"),e.cancelText||(e.cancelText="取消"),e.background||(e.background="#FFFFFF"),e.openType||(e.openType=null),e.appParameter||(e.appParameter=""),"boolean"!=typeof e.autoClose&&(e.autoClose=o.autoClose||!0),"boolean"!=typeof e.formId&&(e.formId=!1),"boolean"!=typeof e.maskClose&&(e.maskClose=o.maskClose||!1),"boolean"!=typeof e.showHeader&&(e.showHeader=!0),"boolean"!=typeof e.showFooter&&(e.showFooter=!0),"boolean"!=typeof e.showCancel&&(e.showCancel=!0),"boolean"!=typeof e.show&&(e.show=!1),"openSetting"===e.openType&&(e.formId&&(e.formId=!1,console.error("showCustModalException：当openType为openSetting时不能设置formId为true，已自动设置为false")),e.openType=null,e.openSetting=!0),e.confirmStyle="",e.cancelStyle="",e.confirmColor&&(e.confirmStyle+=`color: ${e.confirmColor};`),e.cancelColor&&(e.cancelStyle+=`color: ${e.cancelColor};`),this.setData({o:e},()=>{this.show()})}else this.hide()}}},data:{toggleClass:"",animationClass:"",hidden:!1},methods:{show(){this.setData({animationClass:this.data.o.animation+"-show",toggleClass:"gmodal-show",hidden:!0}),this.isTrigger=!1},hide(e){this.setData({animationClass:this.data.o.animation+"-hide",toggleClass:"gmodal-hide","o.show":!1}),setTimeout(()=>{this.setData({hidden:!1}),"function"==typeof e&&e()},"none"===this.data.o.animation?0:350)},isTrigger:!1,bindConfirm(e){if(this.isTrigger)return;let o={};"submit"===e.type&&(o.formId=e.detail.formId),this.data.o.autoClose&&this.hide(),this.data.o.openSetting?wx.openSetting({complete:e=>{o.openSetting="openSetting:ok"===e.errMsg,o.openSettingResult=e,this.triggerConfirm(o)}}):this.triggerConfirm(o)},bindCancel(e){if(this.isTrigger)return;let o=this.data.o.maskClose;e.currentTarget.dataset.mask&&!o||(this.hide(),this.triggerCancel())},triggerConfirm(e){this.myTriggerEvent("confirm",e)},triggerCancel(e){this.myTriggerEvent("cancel",e)},myTriggerEvent(e,o){(o=o instanceof Object?o:{}).autoClose=this.data.o.autoClose,this.triggerEvent("complete",{detail:o,eventType:e,confirmCaller:this.data.o.confirmCaller,cancelCaller:this.data.o.cancelCaller,completeCaller:this.data.o.completeCaller}),!0===this.data.o.autoClose&&(this.isTrigger=!0)},noTouch(){},onErrorConfirmButton(e){console.error("自定义modal组件使用微信开放能力按钮的时候跑出了一个异常:\n",e)}}});